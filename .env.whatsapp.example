# =====================================================
# WhatsApp Business API Configuration
# =====================================================
# Created: 2025-11-28
# Purpose: Environment variables for WhatsApp integration
#
# IMPORTANT: Copy relevant variables to your .env file
# DO NOT commit actual credentials to git
# =====================================================

# -----------------------------------------------------
# WhatsApp Provider Selection
# -----------------------------------------------------
# Options: 'twilio' | 'whatsapp_cloud' | 'messagebird' | '360dialog'
# Twilio: Easiest setup, good documentation, integrates with Supabase
# WhatsApp Cloud API: Direct Meta integration, lower cost
# MessageBird: European provider, GDPR-focused
# 360dialog: Alternative Cloud API provider
WHATSAPP_PROVIDER=twilio

# -----------------------------------------------------
# Feature Flag
# -----------------------------------------------------
# Set to 'true' to enable WhatsApp notifications UI in the app
WHATSAPP_ENABLED=false

# =====================================================
# OPTION 1: Twilio Configuration (Recommended)
# =====================================================
# Sign up: https://www.twilio.com/console
# WhatsApp Setup: https://console.twilio.com/us1/develop/sms/try-it-out/whatsapp-learn

# Twilio Account SID (starts with 'AC...')
WHATSAPP_ACCOUNT_SID=your_twilio_account_sid_here

# Twilio Auth Token (found in Console > Account > Auth Token)
WHATSAPP_AUTH_TOKEN=your_twilio_auth_token_here

# Twilio WhatsApp-enabled phone number (E.164 format: +1234567890)
# Must be a WhatsApp Business sender (configured in Twilio Console)
WHATSAPP_NUMBER=+1234567890

# =====================================================
# OPTION 2: WhatsApp Cloud API (Meta Direct)
# =====================================================
# Sign up: https://developers.facebook.com/
# Setup Guide: https://developers.facebook.com/docs/whatsapp/cloud-api/get-started

# WhatsApp Business Phone Number ID (from Meta Business Manager)
# WHATSAPP_ACCOUNT_SID=your_phone_number_id_here

# Access Token (from Meta App Dashboard > WhatsApp > API Setup)
# WHATSAPP_AUTH_TOKEN=your_access_token_here

# Your WhatsApp Business phone number (E.164 format)
# WHATSAPP_NUMBER=+1234567890

# =====================================================
# OPTION 3: MessageBird Configuration
# =====================================================
# Sign up: https://dashboard.messagebird.com/
# WhatsApp Setup: https://dashboard.messagebird.com/channels/whatsapp

# MessageBird Channel ID (WhatsApp channel)
# WHATSAPP_ACCOUNT_SID=your_channel_id_here

# MessageBird API Key
# WHATSAPP_AUTH_TOKEN=your_api_key_here

# Your WhatsApp number
# WHATSAPP_NUMBER=+1234567890

# =====================================================
# OPTION 4: 360dialog Configuration
# =====================================================
# Sign up: https://hub.360dialog.com/
# Similar to WhatsApp Cloud API

# Phone Number ID
# WHATSAPP_ACCOUNT_SID=your_phone_number_id_here

# API Key
# WHATSAPP_AUTH_TOKEN=your_api_key_here

# WhatsApp number
# WHATSAPP_NUMBER=+1234567890

# =====================================================
# Template Configuration
# =====================================================
# WhatsApp templates must be pre-approved by Meta
# Create templates in: Twilio Console > Messaging > Content Templates
# Or Meta Business Manager > WhatsApp Manager > Message Templates

# Template IDs are configured in:
# server/utils/whatsappNotifications.ts (WHATSAPP_TEMPLATE_IDS)

# Example template structure:
# - order_confirmation_v1: "Your order {{1}} has been confirmed. Total: {{2}}"
# - order_shipped_v1: "Order {{1}} shipped! Tracking: {{2}}"
# - auth_otp_v1: "Your verification code is {{1}}. Valid for {{2}} minutes."

# =====================================================
# Development/Testing
# =====================================================
# For local development without actual WhatsApp API:
# 1. Leave WHATSAPP_ENABLED=false
# 2. Mock functions will log to console instead of sending
# 3. Use test phone numbers in Twilio sandbox (no cost)

# Twilio Sandbox WhatsApp Number (for testing):
# https://console.twilio.com/us1/develop/sms/try-it-out/whatsapp-learn
# Format: whatsapp:+14155238886

# =====================================================
# Cost Estimation (as of July 2025)
# =====================================================
# Authentication messages: ~$0.01-0.14 per message (varies by country)
# Utility messages (order updates): FREE within 24-hour service window
# Marketing messages: ~$0.02-0.20 per message
#
# Monthly estimate for 1,000 orders (3 messages each):
# - 1,000 confirmations: $10-140
# - 2,000 shipping/delivery updates: $0 (if within service window)
# Total: ~$10-140/month (vs $0 for email via Resend free tier)

# =====================================================
# Security Notes
# =====================================================
# - NEVER commit this file with actual credentials
# - Use Vercel environment variables for production
# - Rotate tokens regularly
# - Enable IP whitelisting if provider supports it
# - Monitor usage to detect unauthorized access

# =====================================================
# Additional Resources
# =====================================================
# Twilio WhatsApp Docs: https://www.twilio.com/docs/whatsapp
# WhatsApp Cloud API Docs: https://developers.facebook.com/docs/whatsapp/cloud-api
# Moldova Direct Docs: .docs/whatsapp-integration/README.md
