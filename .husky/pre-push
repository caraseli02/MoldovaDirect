#!/bin/bash

# Pre-push hook: Run critical tests before pushing
# This prevents broken code from being pushed to remote

echo "ğŸš€ Pre-push checks..."

# Run unit tests with coverage threshold
echo "ğŸ§ª Running unit tests with coverage..."
if ! pnpm run test:coverage:check; then
  echo ""
  echo "âŒ Tests or coverage failed! Push blocked."
  echo ""
  echo "Options:"
  echo "  - Fix failing tests"
  echo "  - Use 'git push --no-verify' to skip (not recommended)"
  exit 1
fi

echo ""
echo "âœ… All checks passed! Pushing..."
